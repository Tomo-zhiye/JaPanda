{% extends 'base.html' %}    
{% block title %}
{{post.title}}   
{% endblock %}
{% block content %}
<div class='container'>
  <div class='row justify-content-md-center'>
    <div class='col-md-8 pt-5'>
      <div class='col-12'><h1>{{post.title}}</h1></div>
      <div class='col-12'><p>{{post.content|safe}}</p></div>
      <div class='col-md-12'>
        {% with comments.count as total_comments %}
        <h2>
          {{ total_comments }} comment{{ total_comments|pluralize }}
        </h2>
        {% endwith %}

        {% load mptt_tags %}
        <div>

          {% recursetree comments %}

          <div>{{ node.content }}</div>

          {% if not node.is_leaf_node %}
          <div class='children pr-2 pr-md-5'>
            {{ children }}
          </div>
          {% endif %}

          {% endrecursetree %}
      
        </div>

        <h2>Make a new comment</h2>

        <form id='myform' method='post'>
          {{ comment_form.as_p }}
          {% csrf_token %}
          <button type='submit' class='btn btn-primary btn-lg'>Submit</button>
        <form>
      </div>
    </div>
  </div>
</div>
{% endblock %}    